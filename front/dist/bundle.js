(()=>{"use strict";let e=new class{constructor(e){this.url="http://localhost:3000/api"+e}getAll(){return fetch(this.url)}get(e){return fetch(this.url+e)}getLimit(e){return fetch(this.url+`?limit=${e}`)}getCategory(e){return fetch(this.url+`category/${e}`)}add(e){return fetch(this.url,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}update(e,t){return fetch(this.url+e,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}delete(e){return fetch(this.url+e,{method:"DELETE"})}}("/products/"),t=document.querySelector(".catalog"),n=document.querySelector(".catalog__cards"),a=document.querySelector(".catalog__card-description"),s=document.querySelector(".catalog__category");function c(e,t){let n="";e.forEach((({id:e,title:t,image:a,price:s})=>{n+=`\n            <div class="catalog__cards__item">\n                <div class="card" data-id="${e}">\n                <div class="card__title">\n                    <span>${t}</span>\n                </div>\n                <div class="card__visual">\n                    <img src="${a}">\n                </div>\n                <div class="card__price">\n                    <span>${s} $</span>\n                </div>\n                <button class="card__basket">\n                    <span>add to basket</span>\n                </button>\n                </div>\n            </div>\n        `})),t.innerHTML=n}function i(e,t){let{id:n,title:a,price:s,description:c,category:i,image:l}=e,r=`\n        <div class="selected-card" data-id="${n}">\n            <div class="selected-card__visual">\n            </div>\n            <div class="description-card">\n                <div class="description-card__title">\n                    <span>${a}</span>\n                </div>\n                <div class="description-card__category">\n                    <span>Category - ${i}</span>\n                </div>\n                <div class="description-card__text">\n                    <p>${c}</p>\n                </div>\n                <div class="description-card__price">\n                    <span>${s} $</span>\n                </div>\n                <div class="description-card__control">\n                    <button class="description-card__basket"><span>add to basket</span></button>\n                    <button class="description-card__show-category" data-category="${i}">\n                        <span>Show products ${i}</span>\n                    </button>\n                    <button class="description-card__delete">\n                        <span>Delete</span>\n                    </button>\n                    <button class="description-card__edit">\n                        <span>Edit</span>\n                    </button>\n                </div>\n            </div>\n            <div class="modal">\n                <div class="modal__overlay"></div>\n                <div class="modal__body">\n                    <form id='form'>\n                        <div class="close-modal">&#10006</div>\n                        <label>\n                        <p>Title</p>\n                        <input name="title" type="text" value="${a}">\n                        </label>\n                        <label>\n                        <p>Price</p>\n                        <input name="price" type="text" value="${s}">\n                        </label>\n                        <label>\n                        <p>Description</p>\n                        <textarea name="description">${c}</textarea>\n                        </label>\n                        <label>\n                        <p>Category</p>\n                        <input name="category" type="text" value="${i}">\n                        </label>\n                        <label>\n                        <p>Image</p>\n                        <input name="image" type="text" value="${l}">\n                        </label>\n                        <button class="_form-submit"><span>Submit</span></button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    `;t.innerHTML=r;let d=document.querySelector(".selected-card__visual"),o=document.querySelector(`[data-id="${n}"] .card__visual`);d.innerHTML=o.innerHTML}e.getLimit(10).then((e=>e.json())).then((e=>c(e,n))),t.addEventListener("click",(t=>{if(t.target.closest(".card__title")){const n=t.target.closest(".card").dataset.id;e.get(n).then((e=>e.json())).then((e=>i(e,a)))}if(t.target.closest(".description-card__show-category")){let n=t.target.closest(".description-card__show-category").dataset.category;e.getCategory(n).then((e=>e.json())).then((e=>{let t=`\n                <div class="catalog__category__title">\n                <h2>Products of ${n}</h2>\n                </div>\n                <div class="catalog__category__cards"></div>\n                `;s.innerHTML=t,c(e,document.querySelector(".catalog__category__cards"))}))}let l=t.target.closest(".selected-card");if(t.target.closest(".description-card__delete")){const t=l.dataset.id;e.delete(t).then((()=>a.innerHTML="")).then((()=>{e.getLimit(10).then((e=>e.json())).then((e=>c(e,n)))}))}const r=document.querySelector(".modal"),d=document.querySelector(".modal__overlay");if(t.target.closest(".description-card__edit")&&(r.style.display="block",d.style.display="block"),t.target.closest("._form-submit")){t.preventDefault();const s=document.querySelector("#form"),o=l.dataset.id;r.style.display="none",d.style.display="none";let p={title:s.elements.title.value,price:s.elements.price.value,description:s.elements.description.value,category:s.elements.category.value,image:s.elements.image.value};e.update(o,{...p}).then((e=>e.json())).then((e=>i(e,a))).then((()=>{e.getLimit(10).then((e=>e.json())).then((e=>c(e,n)))}))}let o=t.target.closest(".modal__overlay"),p=t.target.closest("#form"),u=t.target.closest(".close-modal");(o&&!p||u)&&(r.style.display="none",d.style.display="none")}))})();
//# sourceMappingURL=bundle.js.map